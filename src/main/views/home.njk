{% extends "template.njk" %}

{% from "govuk/components/error-summary/macro.njk" import govukErrorSummary %}

{% from "govuk/components/notification-banner/macro.njk" import govukNotificationBanner %}


{% block content %}
  {% if errorMessage and errorMessage | length > 0 %}
    {{ govukErrorSummary({
      titleText: "There is a problem",
      errorList: [
        {
          text: errorMessage
        }
      ]
    }) }}
  {% endif %}

  {% if successMessage %}
    {{ govukNotificationBanner({
      type: "success",
      text: successMessage
    }) }}
  {% endif %}

  <h1 class="govuk-heading-xl">Welcome to your Task list!</h1>
  <a href="/task/new" class="govuk-button">Add New Task</a>

  {% if tasks.length %}
    <div class="govuk-!-width-three-quarters" style="background: #f3f2f1; padding: 20px; border-radius: 5px;">
      {% for task in tasks %}
        <div style="padding: 16px 0; border-bottom: 1px solid #b1b4b6;">
          <div class="govuk-grid-row">
            <div class="govuk-grid-column-three-quarters">
              <a class="govuk-link govuk-!-font-size-19" href="/task/{{ task.id }}">
                {{ task.title }}
              </a>
            </div>
            <div class="govuk-grid-column-one-quarter govuk-!-text-align-right">
              {% if task.status == "COMPLETED" %}
                <strong class="govuk-tag govuk-tag--green">Completed</strong>
              {% else %}
                <strong class="govuk-tag govuk-tag--blue">
                  {{ task.status or 'Incomplete' }}
                </strong>
              {% endif %}
            </div>
          </div>
        </div>
      {% endfor %}
    </div>
  {% else %}
    <p>No tasks available.</p>
  {% endif %}
{% endblock %}

